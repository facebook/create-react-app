(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{176:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return a})),n.d(t,"rightToc",(function(){return s})),n.d(t,"default",(function(){return u}));n(58),n(31),n(22),n(23),n(59),n(0);var r=n(230);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var a={id:"debugging-tests",title:"Debugging Tests",sidebar_label:"Debugging Tests"},s=[{value:"Debugging Tests in Chrome",id:"debugging-tests-in-chrome",children:[]},{value:"Debugging Tests in Visual Studio Code",id:"debugging-tests-in-visual-studio-code",children:[]}],i={rightToc:s},c="wrapper";function u(e){var t=e.components,n=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,["components"]);return Object(r.b)(c,o({},i,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,"There are various ways to setup a debugger for your Jest tests. We cover debugging in Chrome and ",Object(r.b)("a",o({parentName:"p"},{href:"https://code.visualstudio.com/"}),"Visual Studio Code"),"."),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"Note: debugging tests requires Node 8 or higher.")),Object(r.b)("h2",{id:"debugging-tests-in-chrome"},"Debugging Tests in Chrome"),Object(r.b)("p",null,"Add the following to the ",Object(r.b)("inlineCode",{parentName:"p"},"scripts")," section in your project's ",Object(r.b)("inlineCode",{parentName:"p"},"package.json")),Object(r.b)("pre",null,Object(r.b)("code",o({parentName:"pre"},{className:"language-json"}),'"scripts": {\n    "test:debug": "react-scripts --inspect-brk test --runInBand --no-cache"\n  }\n')),Object(r.b)("p",null,"Place ",Object(r.b)("inlineCode",{parentName:"p"},"debugger;")," statements in any test and run:"),Object(r.b)("pre",null,Object(r.b)("code",o({parentName:"pre"},{className:"language-sh"}),"$ npm run test:debug\n")),Object(r.b)("p",null,"This will start running your Jest tests, but pause before executing to allow a debugger to attach to the process."),Object(r.b)("p",null,"Open the following in Chrome"),Object(r.b)("pre",null,Object(r.b)("code",o({parentName:"pre"},{}),"about:inspect\n")),Object(r.b)("p",null,"After opening that link, the Chrome Developer Tools will be displayed. Select ",Object(r.b)("inlineCode",{parentName:"p"},"inspect"),' on your process and a breakpoint will be set at the first line of the react script (this is done to give you time to open the developer tools and to prevent Jest from executing before you have time to do so). Click the button that looks like a "play" button in the upper right hand side of the screen to continue execution. When Jest executes the test that contains the debugger statement, execution will pause and you can examine the current scope and call stack.'),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"Note: the --runInBand cli option makes sure Jest runs test in the same process rather than spawning processes for individual tests. Normally Jest parallelizes test runs across processes but it is hard to debug many processes at the same time.")),Object(r.b)("h2",{id:"debugging-tests-in-visual-studio-code"},"Debugging Tests in Visual Studio Code"),Object(r.b)("p",null,"Debugging Jest tests is supported out of the box for ",Object(r.b)("a",o({parentName:"p"},{href:"https://code.visualstudio.com"}),"Visual Studio Code"),"."),Object(r.b)("p",null,"Use the following ",Object(r.b)("a",o({parentName:"p"},{href:"https://code.visualstudio.com/docs/editor/debugging#_launch-configurations"}),Object(r.b)("inlineCode",{parentName:"a"},"launch.json"))," configuration file:"),Object(r.b)("pre",null,Object(r.b)("code",o({parentName:"pre"},{className:"language-json"}),'{\n  "version": "0.2.0",\n  "configurations": [\n    {\n      "name": "Debug CRA Tests",\n      "type": "node",\n      "request": "launch",\n      "runtimeExecutable": "${workspaceRoot}/node_modules/.bin/react-scripts",\n      "args": ["test", "--runInBand", "--no-cache", "--watchAll=false"],\n      "cwd": "${workspaceRoot}",\n      "protocol": "inspector",\n      "console": "integratedTerminal",\n      "internalConsoleOptions": "neverOpen",\n      "env": { "CI": "true" },\n      "disableOptimisticBPs": true\n    }\n  ]\n}\n')))}u.isMDXComponent=!0},230:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return p}));var r=n(0),o=n.n(r),a=o.a.createContext({}),s=function(e){var t=o.a.useContext(a),n=t;return e&&(n="function"==typeof e?e(t):Object.assign({},t,e)),n},i=function(e){var t=s(e.components);return o.a.createElement(a.Provider,{value:t},e.children)};var c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},l=Object(r.forwardRef)((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,i=e.parentName,c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&-1===t.indexOf(r)&&(n[r]=e[r]);return n}(e,["components","mdxType","originalType","parentName"]),l=s(n),p=r,b=l[i+"."+p]||l[p]||u[p]||a;return n?o.a.createElement(b,Object.assign({},{ref:t},c,{components:n})):o.a.createElement(b,Object.assign({},{ref:t},c))}));function p(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,s=new Array(a);s[0]=l;var i={};for(var u in t)hasOwnProperty.call(t,u)&&(i[u]=t[u]);i.originalType=e,i[c]="string"==typeof e?e:r,s[1]=i;for(var p=2;p<a;p++)s[p]=n[p];return o.a.createElement.apply(null,s)}return o.a.createElement.apply(null,n)}l.displayName="MDXCreateElement"}}]);